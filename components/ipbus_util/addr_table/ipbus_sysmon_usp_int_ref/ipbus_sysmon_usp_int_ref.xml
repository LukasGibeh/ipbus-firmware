<?xml version="1.0" encoding="ISO-8859-1"?>

<node id="ipbus_sysmon_ups_int_ref" fwinfo="endpoint; width=10">

  <node id="csr" fwinfo="endpoint; width=1">
    <node id="control" address="0x00000000">
      <node id="sysmon_select"
            description="Selection of SYSMON to read. 0: SYSMON in primary SLR. [1, 4]: SYSMONs in additional SLRs, if present. See the 'num_slrs' status register for the number of SLRs present."
            mask="0x00000003"
            permission="rw" />
    </node>
    <node id="status" address="0x00000001">
      <node id="num_slrs"
            description="The number of SLRs present in the FPGA. Each SLR has its dedicated SYSMON. Use the 'sysmon_select' control register to determine which SYSMON to read."
            mask="0x00000003"
            permission="r" />
    </node>
  </node>

  <!-- Xilinx UG580 says:
       The ADC always produces a 16-bit conversion result, and the
       full 16-bit result is stored in the 16-bit status
       registers. The 10-bit transfer functions shown in this section
       correspond to the 10 MSBs (most significant or left-most bits)
       in the 16-bit status registers. The six LSBs can be used to
       minimize quantization effects or improve resolution through
       averaging or filtering.

       This address table assumes that no external reference is
       connected (which can be verified by looking at the reading of
       vrefp) and only uses the top 10 bits. -->

  <node id="drp"
        description="More details about the actual DRP register contents can be found in Xilinx UG580."
        address="0x00000100"
        fwinfo="endpoint; width=8">
    <node id="temp"
          description="FPGA die temperature. Conversion (for internal reference and 10 MSBs only): (ADC_code x 509.3140064 / 2^10) - 280.23087870 [C]."
          address="0x00000000"
          mask="0x0000ffc0"
          tags="conversion=(val * 509.3140064 / 1024.) - 280.23087870;C" />

    <node id="vccint"
          description="VCCINT. Conversion (for internal reference and 10 MSBs only): (ADC_code / 2^10) * 3 [V]."
          address="0x00000001"
          mask="0x0000ffc0"
          tags="conversion=(val / 1024.) * 3.;V" />

    <node id="vccaux"
          description="VCCAUX. Conversion (for internal reference and 10 MSBs only): (ADC_code / 2^10) * 3 [V]."
          address="0x00000002"
          mask="0x0000ffc0"
          tags="conversion=(val / 1024.) * 3.;V" />

    <!-- NOTE: At address 0x3 lives the VP/VN measurement, which is
         disabled on the VHDL side. -->

    <node id="vrefp"
          description="VREFP. Conversion (for internal reference and 10 MSBs only): (ADC_code / 2^10) * 3 [V]."
          address="0x00000004"
          mask="0x0000ffc0"
          tags="conversion=(val / 1024.) * 3.;V" />

    <node id="vrefn"
          description="VREFN. Conversion (for internal reference and 10 MSBs only): (ADC_code / 2^10) * 3 [V]."
          address="0x00000005"
          mask="0x0000ffc0"
          tags="conversion=(val / 1024.) * 3.;V" />

    <node id="vccbram"
          description="VCCBRAM. Conversion (for internal reference and 10 MSBs only): (ADC_code / 2^10) * 3 [V]."
          address="0x00000006"
          mask="0x0000ffc0"
          tags="conversion=(val / 1024.) * 3.;V" />
  </node>

</node>
